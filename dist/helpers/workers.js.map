{"version":3,"sources":["../../src/helpers/workers.js"],"names":["logger","Logger","createLogger","port","process","env","PORT","https","require","createServer","app","on","err","error","message","stack","reason","promise","server","listen","debug","host","address","info","cluster","worker","id"],"mappings":";;AAAA;;AACA;;AACA;;AACA;;;;AAEA,IAAMA,MAAM,GAAGC,gBAAOC,YAAP,CAAoB,QAApB,CAAf;;AAEA,IAAMC,IAAI,GAAGC,OAAO,CAACC,GAAR,CAAYC,IAAZ,IAAoB,IAAjC;;AAEA,IAAMC,KAAK,GAAGC,OAAO,CAAC,MAAD,CAAP,CAAgBC,YAAhB,CAA6BC,YAA7B,CAAd;;AAEAN,OAAO,CAACO,EAAR,CAAW,mBAAX,EAAgC,UAASC,GAAT,EAAc;AAC1CZ,EAAAA,MAAM,CAACa,KAAP,CAAa,gCAAb,EAA+CD,GAAG,CAACE,OAAnD,EAA4DF,GAAG,CAACG,KAAhE;AACH,CAFD;AAIAX,OAAO,CAACO,EAAR,CAAW,oBAAX,EAAiC,UAACK,MAAD,EAASC,OAAT,EAAqB;AAClDjB,EAAAA,MAAM,CAACa,KAAP,CAAa,iCAAb,EAAgDG,MAAhD,EAAwDC,OAAxD;AACH,CAFD;AAIA,IAAMC,MAAM,GAAGX,KAAK,CAACY,MAAN,CAAahB,IAAb,EAAmB,UAACS,GAAD,EAAS;AACvC,MAAIA,GAAJ,EAAS;AACLZ,IAAAA,MAAM,CAACa,KAAP,CAAa,8BAAb,EAA6CD,GAAG,CAACE,OAAjD,EAA0DF,GAAG,CAACG,KAA9D;AACH;;AAED,MAAIK,aAAJ,EAAW;AACP,QAAIC,IAAI,GAAGH,MAAM,CAACI,OAAP,EAAX;;AAEA,QAAI,CAACD,IAAD,IAAU,CAACA,IAAI,CAACC,OAAN,IAAiBD,IAAI,CAACC,OAAL,IAAgB,EAAjC,IAAuCD,IAAI,CAACC,OAAL,IAAgB,IAArE,EAA4E;AACxED,MAAAA,IAAI,CAACC,OAAL,GAAe,WAAf;AACH;;AAEDtB,IAAAA,MAAM,CAACuB,IAAP,yCAA6CF,IAAI,CAACC,OAAlD,cAA6DD,IAAI,CAAClB,IAAlE,0BAAsFqB,iBAAQC,MAAR,CAAeC,EAArG;AACH;AACJ,CAdc,CAAf","sourceRoot":"start.js","sourcesContent":["import Logger from './logger';\r\nimport app from './app';\r\nimport cluster from 'cluster';\r\nimport { debug } from '../config/config';\r\n\r\nconst logger = Logger.createLogger('worker');\r\n\r\nconst port = process.env.PORT || 3000;\r\n\r\nconst https = require('http').createServer(app);\r\n\r\nprocess.on('uncaughtException', function(err) {\r\n    logger.error('Uncaught Exception => %s\\n\\n%s', err.message, err.stack);\r\n});\r\n\r\nprocess.on('unhandledRejection', (reason, promise) => {\r\n    logger.error('Unhandled Rejection => %s\\n\\n%s', reason, promise);\r\n});\r\n\r\nconst server = https.listen(port, (err) => {\r\n    if (err) {\r\n        logger.error('Connection Error => %s\\n\\n%s', err.message, err.stack);\r\n    }\r\n\r\n    if (debug) {\r\n        var host = server.address();\r\n\r\n        if (!host || (!host.address || host.address == '' || host.address == '::')) {\r\n            host.address = 'localhost';\r\n        }\r\n\r\n        logger.info(`Server is listening on http://${host.address}:${host.port} with Worker ${cluster.worker.id}`);\r\n    }\r\n});\r\n"],"file":"workers.js"}